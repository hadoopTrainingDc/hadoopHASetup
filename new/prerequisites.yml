---
- name: Installing prerequisites for HADOOP
  hosts: hadoop
  become: true
  gather_facts: false
  tasks:
  - name: Installing Java
    yum:
      name: java-1.8.0,java-1.8.0-openjdk-devel
      state: latest
  - name: Installing rsync
    yum:
      name: rsync
      state: latest
  - name: Installing Midnight Commander
    yum:
      name: mc
      state: latest
  - name: Create --hadoopuser--
    user:
      name: hadoopuser
      shell: '/usr/bin/bash'
      password: $1$abC$bnHkUrTarL4ffXu4Hu9Y1.
      create_home: yes
  - name: Setting env vars script
    synchronize:
      src:  'hadoop-env.sh'
      dest: '/etc/profile.d/hadoop-env.sh'
  - name: Setting hostname
    hostname:
      name: '{{inventory_hostname }}'
  - name: Set hostnames for neighbours
    lineinfile:
      path: /etc/hosts
      state: present
      line: '{{ item }}'
    with_items:
      - 192.168.1.65 hb15 hb-15
      - 192.168.1.66 hb16 hb-16
      - 192.168.1.67 hb17 hb-17
      - 192.168.1.68 hb18 hb-18
      